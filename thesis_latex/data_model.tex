% print no page number
\thispagestyle{empty}

\chapter{Data Model}


Ο πυρήνας της αρχιτεκτονικής Lambda είναι τα δεδομένα της και συγκεκριμένα το master dataset που αποθηκεύεται στο batch layer. Το master dataset αποτελεί την πηγή της “αλήθειας” όπως έχει καταγραφεί και αποθηκευτεί. Ακόμα και αν όλα τα views στο speed και serving layer χανόντουσαν, το σύστημα μπορεί να τα ξαναδημιουργήσει μέσα σε μερικές ώρες από το master dataset. Είναι προφανές οτι το master dataset είναι το μοναδικό κομμάτι της αρχιτεκτονικής Lambda το οποίο πρέπει να προφυλαχτεί από data corruption, disk failure, και άλλα σφάλματα που οδηγούν στη μη αναστρέψιμη απώλεια δεδομένων.

% leave 60mm empty space below
\vspace{60mm}

\section{Ορολογία}
Είναι σημαντικό να καθορίσουμε την ορολογία που χρησιμοποιείται σε κάθε θεματικό επίπεδο ώστε να γίνει σαφές το περιεχόμενο του.
\begin{description}
\item [Information] Είναι οι πληροφορίες που έχουν σχέση με την εφαρμογή που εκτελείται στο σύστημα.
\item [Data] Οι πληροφορίες που δεν μπορούν να εξαχθούν/υπολογιστούν από   άλλα δεδομένα που κατέχονται. Αποτελούν το master dataset. Θα αναφέρονται ως δεδομένα.
\item [Views] Πληροφορίες που έχουν εξαχθεί/υπολογιστεί από τα Data.
\item [Queries] Ερωτήσεις που υποβάλλονται στο σύστημα και απαντώνται από τα Views.
\end{description}

\section{Ιδιότητες των δεδομένων}
Υπάρχουν τρεις ιδιότητες που προτείνεται να έχουν τα δεδομένα του master dataset και αναφέρονται ως rawness, immutability, perpetuity ή όπως αποδίδονται σε μία έκφραση “eternal trueness of data”. Η κάθε μία ιδιότητα θα αναλυθεί και θα εξηγηθεί για να γίνει σαφές ο λόγος που προτείνεται.
\newline

\subsection{Rawness}
Οι πληροφορίες που αποθηκεύονται στο master dataset και αποτελούν τα δεδομένα πρέπει να 	είναι στην πιο ακατέργαστη μορφή τους, κατά προτίμηση στη μορφή σχεδόν που τα λαμβάνουμε χωρίς καμία τροποποίηση ή διαγραφή. Το σύστημα είναι ένα Query Answering σύστημα με κύρια πηγή πληροφοριών το master dataset. Όσο πιο ακατέργαστα είναι τα δεδομένα που κατέχει τόσο περισσότερες ερωτήσεις μπορεί να απαντήσει. Αυτό οφείλετε στο γεγονός ότι οι μέθοδοι κατεργασίας των δεδομένων για αποθήκευση εφαρμόζουν αλγόριθμους για serialization πάνω στα δεδομένα κατά την οποία μπορεί να διαγραφούν δεδομένα που δεν έχουν προβλεφθεί κατά την σχεδίαση των αλγορίθμων ή να μετατραπούν. Επειδή δεν είναι γνωστά από την αρχή όλα τα ερωτήματα που θα υποβληθούν στο σύστημα είναι προτιμότερο να κατέχει όλη την πληροφορία στην αρχική της μορφή ώστε να μπορεί να απαντήσει όποιο ερώτημα προκύψει.
\newline

\subsection{Immutability}
Η επόμενη ιδιότητα των δεδομένων είναι η αμεταβλητότητα τους, η μόνη ενέργεια που επιτρέπεται στο master dataset είναι η Add και δεν υπάρχει Update. Η Delete είναι μια ειδική περίπτωση ενέργειας και επιτρέπεται κάτω από συγκεκριμένες περιπτώσεις. Α αμεταβλητότητα των δεδομένων εμφανίζει δύο πλεονεκτήματα.
\begin{description}
\item [Ασφάλεια από Ανθρώπινα λάθη] Ένας από τους λόγους απώλειας δεδομένων σε πολλές περιπτώσεις οφείλετε σε λάθος πράξεις του ανθρώπινου παράγοντα. Με την αμεταβλητότητα, κανένας χρήστης ή διαχειριστής δεν μπορεί να αλλοιώσει τα ήδη υπάρχοντα δεδομένα, αλλά μόνο να προσθέσει καινούργια. Αν αυτά τα καινούργια είναι λανθασμένα μπορούν εύκολα να διαγραφούν και το σύστημα να συνεχίσει να δουλεύει δημιουργώντας εκ νέου τα Views του με τα σωστά δεδομένα.
\item [Simplicity] Η αποθήκευση δεδομένων που μπορούν να μεταβληθούν στο μέλλον απαιτεί την ύπαρξη τεχνικών εύρεσής συγκεκριμένων δεδομένων. Απαιτείται δηλαδή κάποιο indexing. Αντίθετα η εγγραφή αμετάβλητων δεδομένων προϋποθέτει μόνο έναν μηχανισμό για Append στο master dataset το οποίο είναι πολύ πιο απλό στο σχεδιασμό και υλοποίηση του συστήματος.
\end{description}

Ένα από τα μειονεκτήματα του immutable dataset είναι οι μεγαλύτερες απαιτήσεις σε αποθηκευτικό χώρο καθώς δεν γίνεται κάποιος χωρισμός των δεδομένων σε πίνακες, πολλά στοιχεία μπορεί να αποθηκεύονται ξανά και ξανά με κάθε εγγραφή. 

\subsection{Perpetuity}
Η συγκεκριμένη ιδιότητα επιβεβαιώνει αυτό που θεωρούνταν ως τώρα αυτονόητο, τα δεδομένα είναι και θα είναι για πάντα αληθινά. Data is eternally true. Το immutability δεν μπορεί να υποστηριχθεί χωρίς να ικανοποιείται το perpetuity. Η ιδιότητα αυτή καλύπτεται από την προσθήκη timestamp στις πληροφορίες που αποθηκεύονται στο master dataset, από την στιγμή που υπάρχει χρόνος αναφοράς για τα δεδομένα είναι εύκολο να ελεγχθεί και αν όντως ισχύουν.

\subsection{Delete}
Αναφέρθηκε ήδη μια περίπτωση όπου η διαγραφή των immutable δεδομένων είναι επιτρεπτή και μάλιστα απαραίτητη για την σωστή λειτουργία του συστήματος. Θα αναφερθούν ακόμα δύο περιπτώσεις στις οποίες το Delete μπορεί να εφαρμοστεί στο master dataset. Και στις δύο αυτές περιπτώσεις, η διαγραφή δεν έχει σχέση με την ορθότητα των δεδομένων αλλά με την αξία των δεδομένων. 
\begin{description}
\item [Garbage collection] Ο όρος είναι γνωστός και αναφέρεται στην συλλογή και εκκαθάριση άχρηστων δεδομένων. Παρομοίως μπορεί να εφαρμοστεί και στο master dataset για να μειώσει τον αποθηκευτικό χώρο που απαιτεί με το να διαγραφούν τα δεδομένα, ή τα κομμάτια των δεδομένων που έχουν την χαμηλότερη πληροφοριακή αξία. 
\item [Κανονισμοί] Σε αρκετές περιπτώσεις ευαίσθητων και ιδιωτικών δεδομένων, απαιτείται η διαγραφή τους είτε μετά είτε κατά την συλλογή τους.
\end{description}

 Σε όλες τις περιπτώσεις διαγραφής θα πρέπει να ληφθούν μέτρα για να ολοκληρωθεί η διαδικασία σωστά και χωρίς επιπλέον απώλειες δεδομένων.
Συνιστάται η αντιγραφή ολόκληρου του master dataset, η εφαρμογή των αλγορίθμων για την διαγραφή των κατάλληλων δεδομένων και ο έλεγχος έχουν απομείνει τα σωστά δεδομένα χωρίς απώλειες. Το αντίγραφο μπορεί να διαγραφεί με ασφάλεια αφού δημιουργηθούν τα καινούργια Views και δοκιμαστούν με επιτυχία.
